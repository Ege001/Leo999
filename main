--[[
    üëë SOVEREIGN V46 | APEX ULTIMATE
    OWNER: EgeKazak_Real1
    FULL INTEGRATED SAFE VERSION (NO ACTIVE GAMEPASS BYPASS)
]]

-- SAFE LOADING
local function SafeLoading()
    local sg = Instance.new("ScreenGui", game.CoreGui)
    local frame = Instance.new("Frame", sg)
    frame.Size = UDim2.new(1, 0, 1, 0)
    frame.BackgroundColor3 = Color3.fromRGB(5, 5, 10)
    local txt = Instance.new("TextLabel", frame)
    txt.Size = UDim2.new(0, 500, 0, 100)
    txt.Position = UDim2.new(0.5, -250, 0.45, 0)
    txt.Text = "SOVEREIGN APEX V46\nSistemler Zorlanƒ±yor..."
    txt.TextColor3 = Color3.fromRGB(0, 170, 255)
    txt.Font = Enum.Font.GothamBold
    txt.TextSize = 30
    txt.BackgroundTransparency = 1
    task.wait(1.5)
    sg:Destroy()
end
pcall(SafeLoading)

-- SERVICES & BASICS
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local lp = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- RAYFIELD LOAD (varsa, yoksa hata vermez)
local ok_ray, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)
if not ok_ray then
    warn("Rayfield y√ºklenemedi ‚Äî UI fonksiyonlarƒ± sƒ±nƒ±rlƒ± olabilir.")
    Rayfield = nil
end

-- DEFAULT GLOBALS
_G.Speed = _G.Speed or 16
_G.Jump = _G.Jump or 50
_G.FOV = _G.FOV or (Camera and Camera.FieldOfView) or 70
_G.Noclip = _G.Noclip or false
_G.InfJump = _G.InfJump or false

-- ---------------------
-- SAFE: GAMEPASS BYPASS KISMI (YORUMLU)
-- ---------------------
-- pcall(function()
--     local sgp = require(ReplicatedStorage.Modules.Client.UI.ShowGamepass)
--     sgp.IsOwned = function() return true end
--     sgp.IsPlayerOwned = function() return true end
--     local gpc = require(ReplicatedStorage.Modules.Client.Data.Gamepass)
--     gpc.CanPlayerViewAdvertisements = function() return true end
-- end)
-- (Yukarƒ±daki b√∂l√ºm bilin√ßli olarak yorumlandƒ± ‚Äî aktif edilmeyecektir.)

-- UI: eƒüer Rayfield y√ºkl√ºyse pencere olu≈ütur; deƒüilse basit fallback kullan.
local Window
if Rayfield then
    Window = Rayfield:CreateWindow({
       Name = "üëë SOVEREIGN V46 | APEX",
       LoadingTitle = "EgeKazak_Real1 √ñzel S√ºr√ºm",
       LoadingSubtitle = "1000 Limit Unlocked",
       Theme = "DarkBlue",
       ConfigurationSaving = { Enabled = false }
    })
else
    -- minimal stub
    Window = {
        CreateTab = function(_, n) return { CreateSlider = function() end, CreateToggle = function() end, CreateButton = function() end, CreateDropdown = function() end } end
    }
end

-- TABS
local MoveTab = Window:CreateTab("‚ö° Hareket", 4483362458)
local MainTab = Window:CreateTab("üè† Ana Kontrol", 4483362458)
local TPTab = Window:CreateTab("‚úàÔ∏è I≈üƒ±nlanma", 4483362458)
local ToolTab = Window:CreateTab("üì¶ E≈üyalar", 4483362458)
local ExtraTab = Window:CreateTab("‚ú® Ekstra", 4483362458)
local ViewerTab = Window:CreateTab("üî≠ ƒ∞zle & Avatar", 4483362458)

-- ---------- APPLY FUNCTIONS (Slider callback'leri buraya baƒülanacak) ----------
local function applySpeed(v)
    _G.Speed = v
    pcall(function()
        if lp.Character and lp.Character:FindFirstChildWhichIsA("Humanoid") then
            lp.Character:FindFirstChildWhichIsA("Humanoid").WalkSpeed = _G.Speed
        end
    end)
end
local function applyJump(v)
    _G.Jump = v
    pcall(function()
        if lp.Character and lp.Character:FindFirstChildWhichIsA("Humanoid") then
            local h = lp.Character:FindFirstChildWhichIsA("Humanoid")
            h.JumpPower = _G.Jump
            h.UseJumpPower = true
        end
    end)
end
local function applyFOV(v)
    _G.FOV = v
    pcall(function()
        if Camera then Camera.FieldOfView = _G.FOV end
    end)
end

-- ---------- UI CONTROLS: MoveTab sliders/toggles (callback'leri apply* ile direkt baƒülƒ±) ----------
MoveTab:CreateSlider({
   Name = "Hƒ±z (WalkSpeed)",
   Range = {16, 1000},
   CurrentValue = _G.Speed,
   Callback = function(v) applySpeed(v) end,
})
MoveTab:CreateSlider({
   Name = "Zƒ±plama (JumpPower)",
   Range = {50, 1000},
   CurrentValue = _G.Jump,
   Callback = function(v) applyJump(v) end,
})
MoveTab:CreateToggle({
   Name = "Noclip (Duvar Ge√ß)",
   Callback = function(v) _G.Noclip = v end,
})
MoveTab:CreateToggle({
   Name = "Sonsuz Zƒ±plama",
   Callback = function(v) _G.InfJump = v end,
})

-- ---------- MAIN TAB ADS & ADMIN ----------
MainTab:CreateButton({
   Name = "üì¢ REKLAM MEN√úS√úN√ú ZORLA A√á (Basit)",
   Callback = function()
       pcall(function()
           local gui = lp.PlayerGui:FindFirstChild("MainGUIHandler", true)
           local ads = gui and gui:FindFirstChild("AdStore", true)
           if ads then ads.Visible = true end
       end)
   end,
})
MainTab:CreateButton({
   Name = "üì¢ REKLAM MEN√úS√úN√ú TETƒ∞KLE (Geni≈ü Arama)",
   Callback = function()
       -- Daha agresif: t√ºm gui'lerde "ad" ge√ßenleri a√ß ve i√ßindeki butonlarƒ± tetikle
       local function TryOpenAds()
           local found = {}
           for _, container in ipairs({lp.PlayerGui, game.CoreGui}) do
               for _, g in ipairs(container:GetDescendants()) do
                   if g:IsA("GuiObject") and tostring(g.Name):lower():match("ad") then
                       table.insert(found, g)
                   end
               end
           end
           if #found == 0 then
               if Rayfield then Rayfield:Notify({Title="Reklam", Content="Client-side Ad GUI bulunamadƒ±.", Duration=3}) end
               return
           end
           for _, gui in ipairs(found) do
               pcall(function()
                   if gui:IsA("GuiObject") then gui.Visible = true end
                   for _, d in ipairs(gui:GetDescendants()) do
                       if d:IsA("GuiObject") then d.Visible = true end
                       -- butonlarƒ± tetikle (MouseButton1Click / Activated)
                       if d:IsA("TextButton") or d:IsA("ImageButton") then
                           pcall(function()
                               if d.Activated then
                                   d:Activate()
                               else
                                   d:Fire("MouseButton1Click")
                               end
                           end)
                       end
                   end
               end)
           end
           if Rayfield then Rayfield:Notify({Title="Reklam", Content="Client-side Ad GUI a√ßƒ±ldƒ± (butonlar tetiklenmeye √ßalƒ±≈üƒ±ldƒ±).", Duration=3}) end
       end
       pcall(TryOpenAds)
   end,
})
MainTab:CreateButton({
   Name = "‚å®Ô∏è CMDR ADMIN PANELƒ∞ (F2)",
   Callback = function()
       pcall(function()
           local ok, cmdr = pcall(function() return require(ReplicatedStorage:WaitForChild("Packages"):WaitForChild("CmdrClient")) end)
           if ok and cmdr then cmdr:Show() end
       end)
   end,
})

-- ---------- TELEPORT (TPTab) ----------
TPTab:CreateButton({
    Name = "üí∞ BANKA (YENƒ∞ KONUM FIX)",
    Callback = function()
        pcall(function()
            if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
                lp.Character.HumanoidRootPart.CFrame = CFrame.new(-10.7334747, 15.4523478, 275.049194)
            end
        end)
    end,
})
TPTab:CreateButton({
    Name = "üè¢ POLƒ∞S MERKEZƒ∞",
    Callback = function()
        pcall(function()
            if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
                lp.Character.HumanoidRootPart.CFrame = CFrame.new(-119.57766, 2.72700167, 12.2390404)
            end
        end)
    end,
})

-- ---------- TOOL TAB (Money Gun) ----------
ToolTab:CreateButton({
   Name = "üíµ MONEY GUN (VIP) AL",
   Callback = function()
       pcall(function()
           local remote = ReplicatedStorage:FindFirstChild("ItemRemote", true)
           if remote then remote:FireServer("MoneyGun") end
           local tool = ReplicatedStorage:FindFirstChild("MoneyGun", true)
           if tool then tool:Clone().Parent = lp.Backpack end
       end)
   end,
})

-- ---------- HUD (SOV_HUD) ----------
local function createHUD()
    local existing = lp.PlayerGui:FindFirstChild("SOV_HUD")
    if existing then existing:Destroy() end
    local sg = Instance.new("ScreenGui", lp.PlayerGui)
    sg.Name = "SOV_HUD"
    local frame = Instance.new("Frame", sg)
    frame.Size = UDim2.new(0, 200, 0, 80)
    frame.Position = UDim2.new(0, 10, 0, 10)
    frame.BackgroundTransparency = 0.45
    frame.BackgroundColor3 = Color3.fromRGB(10,10,10)
    frame.BorderSizePixel = 0
    frame.ZIndex = 50
    local speedLbl = Instance.new("TextLabel", frame)
    speedLbl.Size = UDim2.new(1, -10, 0, 30)
    speedLbl.Position = UDim2.new(0, 5, 0, 5)
    speedLbl.BackgroundTransparency = 1
    speedLbl.Text = "Hƒ±z: "..tostring(_G.Speed)
    speedLbl.TextXAlignment = Enum.TextXAlignment.Left
    speedLbl.TextColor3 = Color3.fromRGB(0, 170, 255)
    speedLbl.Font = Enum.Font.Gotham
    speedLbl.TextSize = 16
    local jumpLbl = Instance.new("TextLabel", frame)
    jumpLbl.Size = UDim2.new(1, -10, 0, 30)
    jumpLbl.Position = UDim2.new(0, 5, 0, 40)
    jumpLbl.BackgroundTransparency = 1
    jumpLbl.Text = "Zƒ±plama: "..tostring(_G.Jump)
    jumpLbl.TextXAlignment = Enum.TextXAlignment.Left
    jumpLbl.TextColor3 = Color3.fromRGB(0, 255, 170)
    jumpLbl.Font = Enum.Font.Gotham
    jumpLbl.TextSize = 16
    spawn(function()
        while sg.Parent do
            pcall(function()
                speedLbl.Text = "Hƒ±z: "..tostring(math.floor(_G.Speed))
                jumpLbl.Text = "Zƒ±plama: "..tostring(math.floor(_G.Jump))
            end)
            task.wait(0.25)
        end
    end)
end
createHUD()

-- ---------- EXTRA TAB: FOV Slider, Save slots, GUI toggle, copy coords ----------
ExtraTab:CreateSlider({
    Name = "Kamera FOV",
    Range = {45, 120},
    CurrentValue = _G.FOV,
    Callback = function(v) applyFOV(v) end,
})
local guiVisible = true
ExtraTab:CreateButton({
    Name = "üëÅÔ∏è GUI Gizle/G√∂ster",
    Callback = function()
        guiVisible = not guiVisible
        pcall(function()
            for _, v in pairs(game.CoreGui:GetChildren()) do
                if v:IsA("ScreenGui") and tostring(v.Name):lower():match("rayfield") then
                    if rawget(v, "Enabled") ~= nil then v.Enabled = guiVisible else v.Visible = guiVisible end
                end
            end
            local hud = lp.PlayerGui:FindFirstChild("SOV_HUD")
            if hud then hud.Enabled = guiVisible end
        end)
    end,
})

local savedPositions = {nil, nil, nil}
ExtraTab:CreateButton({Name="üìå Pozisyon Kaydet (Slot 1)", Callback=function() pcall(function() if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then savedPositions[1] = lp.Character.HumanoidRootPart.CFrame if Rayfield then Rayfield:Notify({Title="Kaydedildi", Content="Slot1", Duration=2}) end end end) end})
ExtraTab:CreateButton({Name="‚û°Ô∏è Slot1'e Git", Callback=function() pcall(function() if savedPositions[1] and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then lp.Character.HumanoidRootPart.CFrame = savedPositions[1] end end) end})
ExtraTab:CreateButton({Name="üìå Pozisyon Kaydet (Slot 2)", Callback=function() pcall(function() if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then savedPositions[2] = lp.Character.HumanoidRootPart.CFrame if Rayfield then Rayfield:Notify({Title="Kaydedildi", Content="Slot2", Duration=2}) end end end) end})
ExtraTab:CreateButton({Name="‚û°Ô∏è Slot2'ye Git", Callback=function() pcall(function() if savedPositions[2] and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then lp.Character.HumanoidRootPart.CFrame = savedPositions[2] end end) end})
ExtraTab:CreateButton({Name="üìå Pozisyon Kaydet (Slot 3)", Callback=function() pcall(function() if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then savedPositions[3] = lp.Character.HumanoidRootPart.CFrame if Rayfield then Rayfield:Notify({Title="Kaydedildi", Content="Slot3", Duration=2}) end end end) end})
ExtraTab:CreateButton({Name="‚û°Ô∏è Slot3'e Git", Callback=function() pcall(function() if savedPositions[3] and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then lp.Character.HumanoidRootPart.CFrame = savedPositions[3] end end) end})
ExtraTab:CreateButton({Name="üìã Koordinatlarƒ± Kopyala", Callback=function()
    pcall(function()
        if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
            local cf = lp.Character.HumanoidRootPart.CFrame
            local s = string.format("CFrame.new(%.3f, %.3f, %.3f)", cf.Position.X, cf.Position.Y, cf.Position.Z)
            local ok = pcall(function() setclipboard(s) end)
            if ok and Rayfield then Rayfield:Notify({Title="Kopyalandƒ±", Content="Panoya kopyalandƒ±", Duration=2}) else print("Koordinatlar: "..s) if Rayfield then Rayfield:Notify({Title="Kopyalama yok", Content="Konsola yazdƒ±rƒ±ldƒ±", Duration=3}) end end
        end
    end)
end})

-- ---------- VIEWER TAB: player dropdown, info, copy avatar, spectate ----------
local function getNames()
    local t = {}
    for _,p in ipairs(Players:GetPlayers()) do table.insert(t, p.Name) end
    return t
end

local selectedName = lp.Name
local dropdown = ViewerTab:CreateDropdown({
    Name = "Oyuncu Se√ß",
    Options = getNames(),
    CurrentOption = selectedName,
    Callback = function(opt) selectedName = opt end,
})
Players.PlayerAdded:Connect(function() pcall(function() dropdown:Refresh(getNames()) end) end)
Players.PlayerRemoving:Connect(function() pcall(function() dropdown:Refresh(getNames()) end) end)

local isSpectating = false
local prevCameraSubject, prevCameraType = nil, nil

ViewerTab:CreateButton({Name="üîç ƒ∞zle (View)", Callback=function()
    pcall(function()
        if not selectedName then if Rayfield then Rayfield:Notify({Title="Hata", Content="Oyuncu se√ß", Duration=2}) end return end
        local target = Players:FindFirstChild(selectedName)
        if not target or not target.Character or not target.Character:FindFirstChildWhichIsA("Humanoid") then if Rayfield then Rayfield:Notify({Title="Hata", Content="Karakter yok", Duration=2}) end return end
        prevCameraSubject = Camera.CameraSubject
        prevCameraType = Camera.CameraType
        Camera.CameraType = Enum.CameraType.Custom
        Camera.CameraSubject = target.Character:FindFirstChildWhichIsA("Humanoid")
        isSpectating = true
        if Rayfield then Rayfield:Notify({Title="ƒ∞zleme", Content="≈ûimdi "..selectedName.." izleniyor", Duration=3}) end
    end)
end})
ViewerTab:CreateButton({Name="‚èπÔ∏è ƒ∞zlemeyi Bitir", Callback=function()
    pcall(function()
        if isSpectating then
            if prevCameraSubject then Camera.CameraSubject = prevCameraSubject end
            if prevCameraType then Camera.CameraType = prevCameraType end
            isSpectating = false
            if Rayfield then Rayfield:Notify({Title="ƒ∞zleme", Content="Sonlandƒ±rƒ±ldƒ±", Duration=2}) end
        else
            if Rayfield then Rayfield:Notify({Title="ƒ∞zleme", Content="Hi√ß izlemiyorsun", Duration=2}) end
        end
    end)
end})

ViewerTab:CreateButton({Name="‚ÑπÔ∏è Bilgi G√∂ster", Callback=function()
    pcall(function()
        local p = Players:FindFirstChild(selectedName)
        if not p then if Rayfield then Rayfield:Notify({Title="Hata", Content="Oyuncu bulunamadƒ±", Duration=2}) end return end
        local lines = {"Name:"..p.Name, "ID:"..p.UserId}
        if p.Character and p.Character:FindFirstChild("HumanoidRootPart") and lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
            local d = (lp.Character.HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Magnitude
            table.insert(lines, string.format("Distance: %.1f", d))
        end
        if p.Character and p.Character:FindFirstChildWhichIsA("Humanoid") then
            local h = p.Character:FindFirstChildWhichIsA("Humanoid")
            table.insert(lines, "Health:"..math.floor(h.Health).."/"..math.floor(h.MaxHealth))
        end
        if Rayfield then Rayfield:Notify({Title="Player Info", Content=table.concat(lines," ‚Ä¢ "), Duration=5}) end
        for _,ln in ipairs(lines) do print(ln) end
    end)
end})

ViewerTab:CreateButton({Name="üßç‚Äç‚ôÇÔ∏è Avatarƒ± Kopyala (Local'a Uygula)", Callback=function()
    pcall(function()
        local p = Players:FindFirstChild(selectedName)
        if not p then if Rayfield then Rayfield:Notify({Title="Hata", Content="Oyuncu bulunamadƒ±", Duration=2}) end return end
        local ok, desc = pcall(function() return Players:GetHumanoidDescriptionFromUserId(p.UserId) end)
        if not ok or not desc then if Rayfield then Rayfield:Notify({Title="Hata", Content="Description alƒ±namadƒ±", Duration=3}) end return end
        if lp.Character and lp.Character:FindFirstChildWhichIsA("Humanoid") then
            local h = lp.Character:FindFirstChildWhichIsA("Humanoid")
            local s, e = pcall(function() h:ApplyDescription(desc) end)
            if s then if Rayfield then Rayfield:Notify({Title="Ba≈üarƒ±lƒ±", Content="Avatar uygulandƒ±", Duration=3}) end else if Rayfield then Rayfield:Notify({Title="Hata", Content="Uygulanamadƒ±", Duration=3}) end end
        else
            if Rayfield then Rayfield:Notify({Title="Hata", Content="Local karakter yok", Duration=2}) end
        end
    end)
end})

-- ---------- ENFORCE SYSTEM: humanoid property watchers + Heartbeat enforcement ----------
local humanoidWatch = {}
local function watchHumanoid(hum)
    if not hum then return end
    -- apply immediately
    pcall(function() hum.WalkSpeed = _G.Speed hum.JumpPower = _G.Jump hum.UseJumpPower = true end)
    -- disconnect old if exists
    if humanoidWatch[hum] then
        for _,c in pairs(humanoidWatch[hum]) do if c and c.Disconnect then pcall(function() c:Disconnect() end) end end
    end
    local conns = {}
    table.insert(conns, hum:GetPropertyChangedSignal("WalkSpeed"):Connect(function() pcall(function() if hum and hum.Parent then hum.WalkSpeed = _G.Speed end end) end))
    table.insert(conns, hum:GetPropertyChangedSignal("JumpPower"):Connect(function() pcall(function() if hum and hum.Parent then hum.JumpPower = _G.Jump hum.UseJumpPower = true end end) end))
    table.insert(conns, hum.Changed:Connect(function(prop) 
        if prop == "WalkSpeed" then pcall(function() if hum and hum.Parent then hum.WalkSpeed = _G.Speed end end)
        elseif prop == "JumpPower" then pcall(function() if hum and hum.Parent then hum.JumpPower = _G.Jump hum.UseJumpPower = true end end) end
    end))
    humanoidWatch[hum] = conns
end

local function unwatchHumanoid(hum)
    if humanoidWatch[hum] then
        for _,c in pairs(humanoidWatch[hum]) do if c and c.Disconnect then pcall(function() c:Disconnect() end) end end
        humanoidWatch[hum] = nil
    end
end

-- watch local player humanoid on spawn
local function setupLocalChar(char)
    if not char then return end
    local h = char:FindFirstChildWhichIsA("Humanoid") or char:WaitForChild("Humanoid", 2)
    if h then watchHumanoid(h) end
end
if lp.Character then setupLocalChar(lp.Character) end
lp.CharacterAdded:Connect(function(c) task.wait(0.2) setupLocalChar(c) end)

-- heartbeat enforcement
local hbConn = RunService.Heartbeat:Connect(function()
    pcall(function()
        if lp.Character and lp.Character:FindFirstChildWhichIsA("Humanoid") then
            local h = lp.Character:FindFirstChildWhichIsA("Humanoid")
            if h.WalkSpeed ~= _G.Speed then h.WalkSpeed = _G.Speed end
            if h.JumpPower ~= _G.Jump then h.JumpPower = _G.Jump h.UseJumpPower = true end
        end
        if Camera and Camera.FieldOfView ~= _G.FOV then
            Camera.FieldOfView = _G.FOV
        end
        if _G.Noclip and lp.Character then
            for _,part in pairs(lp.Character:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
        end
    end)
end)

-- inf jump
local jumpConn = UserInputService.JumpRequest:Connect(function()
    if _G.InfJump and lp.Character and lp.Character:FindFirstChildWhichIsA("Humanoid") then
        pcall(function() lp.Character:FindFirstChildWhichIsA("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping) end)
    end
end)

-- keyboard shortcuts (RightShift noclip, RightControl infjump, RightAlt save-pos-next)
local nextSlot = 1
local inputConn = UserInputService.InputBegan:Connect(function(inp, processed)
    if processed then return end
    if inp.KeyCode == Enum.KeyCode.RightShift then
        _G.Noclip = not _G.Noclip
        if Rayfield then Rayfield:Notify({Title="Noclip", Content=tostring(_G.Noclip), Duration=1.5}) end
    elseif inp.KeyCode == Enum.KeyCode.RightControl then
        _G.InfJump = not _G.InfJump
        if Rayfield then Rayfield:Notify({Title="InfJump", Content=tostring(_G.InfJump), Duration=1.5}) end
    elseif inp.KeyCode == Enum.KeyCode.RightAlt then
        if lp.Character and lp.Character:FindFirstChild("HumanoidRootPart") then
            savedPositions[nextSlot] = lp.Character.HumanoidRootPart.CFrame
            if Rayfield then Rayfield:Notify({Title="Pozisyon", Content="Slot "..tostring(nextSlot).." kaydedildi", Duration=2}) end
            nextSlot = nextSlot + 1
            if nextSlot > 3 then nextSlot = 1 end
        end
    end
end)

-- ---------- DESTROY / CLEANUP ----------
local function TryDisableRayfieldGUIs()
    pcall(function()
        for _, v in pairs(game.CoreGui:GetChildren()) do
            if v:IsA("ScreenGui") and (tostring(v.Name):lower():match("rayfield") or tostring(v.Name):lower():match("sirius")) then
                if rawget(v, "Enabled") ~= nil then v.Enabled = false else v:Destroy() end
            end
        end
    end)
end

local function DestroyEverything()
    pcall(function()
        -- revert globals
        _G.Noclip = false
        _G.InfJump = false
        _G.Speed = 16
        _G.Jump = 50
        _G.FOV = 70
        -- destroy hud
        local hud = lp.PlayerGui:FindFirstChild("SOV_HUD")
        if hud then hud:Destroy() end
        -- clear saved pos
        savedPositions = {nil, nil, nil}
        -- disconnect enforcement
        if hbConn then pcall(function() hbConn:Disconnect() end) end
        if jumpConn then pcall(function() jumpConn:Disconnect() end) end
        if inputConn then pcall(function() inputConn:Disconnect() end) end
        -- disconnect humanoid watchers
        for hum,conns in pairs(humanoidWatch) do
            for _,c in pairs(conns) do if c and c.Disconnect then pcall(function() c:Disconnect() end) end end
            humanoidWatch[hum] = nil
        end
        -- disable Rayfield GUIs
        TryDisableRayfieldGUIs()
        if Rayfield then pcall(function() Rayfield:Notify({Title="Temizlendi", Content="Eklentiler kaldƒ±rƒ±ldƒ±", Duration=3}) end) end
    end)
end

MainTab:CreateButton({
    Name = "üóëÔ∏è Kaldƒ±r (Destroy Script)",
    Callback = function()
        DestroyEverything()
    end,
})

-- Override existing global DestroyEverything if varsa √∂ncekiyle birle≈ütir
if type(_G.DestroyEverything) == "function" then
    local old = _G.DestroyEverything
    _G.DestroyEverything = function()
        pcall(old)
        pcall(DestroyEverything)
    end
else
    _G.DestroyEverything = DestroyEverything
end

-- FINAL NOTIFY
if Rayfield then Rayfield:Notify({Title="Hazƒ±r", Content="Tam entegre s√ºr√ºm y√ºklendi. Slider'lar artƒ±k d√ºzg√ºn √ßalƒ±≈üƒ±yor.", Duration=4}) end

-- END OF SINGLE-FILE SAFE SCRIPT
