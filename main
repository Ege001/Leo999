-- Modern UI Yükleme
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local lp = game.Players.LocalPlayer
local runService = game:GetService("RunService")
local camera = workspace.CurrentCamera
local myName = lp.Name -- Scripti kim açarsa onun adını alır

local Window = Rayfield:CreateWindow({
   Name = "Gemini Hub V17 | SP-Origin Edition",
   LoadingTitle = "Modül Verileri İşleniyor...",
   LoadingSubtitle = "Hoş geldin, " .. myName,
   ConfigurationSaving = { Enabled = true, FolderName = "GeminiV17" }
})

-- DEĞİŞKENLER
local flying = false
local noclip = false
local flySpeed = 50
local bGyro, bVel

-- SEKMELER
local VIPTab = Window:CreateTab("Bypass & Store", 4483362458)
local CharacterTab = Window:CreateTab("Karakter (Fly/Speed)", 4483362458)
local VehicleTab = Window:CreateTab("Araçlar / Vehicles", 4483362458)
local WorldTab = Window:CreateTab("Dünya / World", 4483362458)

-- 1. ADS BUTONU VE MENÜ SİSTEMİ (ÖNCE BUTON SONRA MENÜ)
VIPTab:CreateButton({
   Name = "Ads Butonunu Tetikle (Click to Show Menu)",
   Callback = function()
      pcall(function()
          -- MainGUIHandler İçindeki Orijinal AdStore'u bulur ve butonu simüle eder
          local playerGui = lp:WaitForChild("PlayerGui")
          local mainGui = playerGui:FindFirstChild("MainGUIHandler", true)
          
          if mainGui then
              local adStore = mainGui:FindFirstChild("AdStore", true)
              if adStore then
                  adStore.Visible = not adStore.Visible -- Her basışta aç/kapat yapar
                  Rayfield:Notify({Title = "Mağaza", Content = "AdStore Menüsü Tetiklendi!", Duration = 3})
              end
          end
      end)
   end,
})

VIPTab:CreateButton({
   Name = "TÜM GAMEPASSLERİ ADIMA TANIMLA (Full Bypass)",
   Callback = function()
      pcall(function()
          -- AllGamepasses.txt içindeki ID'ler (Scripti kullanan kişiye atanır)
          local passList = {850049439, 9066980, 9066970, 15927395, 82773869, 19660651}

          -- AllPassesFetched Engelini Kökten Çöz
          for _, v in pairs(getgc(true)) do
              if type(v) == "table" and (rawget(v, "AllPassesFetched") ~= nil or rawget(v, "__GAMEPASS") ~= nil) then
                  v.AllPassesFetched = true
                  v.__GAMEPASS = true
                  v.Premium = true
                  v.VIP = true
              end
          end

          -- MarketPlaceService Hooking (Kullanıcıya Özel Yetki)
          local mt = getrawmetatable(game)
          setreadonly(mt, false)
          local old = mt.__index
          mt.__index = newcclosure(function(t, k)
              if k == "UserOwnsGamePassAsync" or k == "PlayerOwnsAsset" then return true end
              return old(t, k)
          end)

          Rayfield:Notify({Title = "SİSTEM", Content = "Tüm yetkiler " .. myName .. " hesabına başarıyla tanımlandı!", Duration = 5})
      end)
   end,
})

-- 2. SP-HUB TARZI UNIVERSAL FLY (MOBİL & PC)
CharacterTab:CreateToggle({
   Name = "Uçma (Fly Mode)",
   CurrentValue = false,
   Callback = function(Value)
      flying = Value
      local char = lp.Character or lp.CharacterAdded:Wait()
      local root = char:WaitForChild("HumanoidRootPart")
      local hum = char:WaitForChild("Humanoid")
      if flying then
          bGyro = Instance.new("BodyGyro", root)
          bGyro.P = 9e4
          bGyro.maxTorque = Vector3.new(9e9, 9e9, 9e9)
          bVel = Instance.new("BodyVelocity", root)
          bVel.maxForce = Vector3.new(9e9, 9e9, 9e9)
          spawn(function()
              while flying do
                  runService.RenderStepped:Wait()
                  local moveVec = require(lp.PlayerScripts:WaitForChild("PlayerModule")):GetControls():GetMoveVector()
                  bVel.Velocity = (camera.CFrame.LookVector * -moveVec.Z + camera.CFrame.RightVector * moveVec.X) * flySpeed
                  bGyro.CFrame = camera.CFrame
                  hum.PlatformStand = true
              end
              if bGyro then bGyro:Destroy() end
              if bVel then bVel:Destroy() end
              hum.PlatformStand = false
          end)
      end
   end,
})

CharacterTab:CreateSlider({
   Name = "Uçma Hızı",
   Range = {10, 500},
   Increment = 10,
   CurrentValue = 50,
   Callback = function(Value) flySpeed = Value end,
})

CharacterTab:CreateToggle({
   Name = "Noclip (Duvar Geçme)",
   CurrentValue = false,
   Callback = function(Value)
      noclip = Value
      runService.Stepped:Connect(function()
         if noclip and lp.Character then
            for _, v in pairs(lp.Character:GetDescendants()) do
               if v:IsA("BasePart") then v.CanCollide = false end
            end
         end
      end)
   end,
})

-- 3. HAREKET VE ARAÇ AYARLARI
CharacterTab:CreateSlider({
   Name = "Hız (WalkSpeed)",
   Range = {16, 500},
   Increment = 1,
   CurrentValue = 16,
   Callback = function(Value) lp.Character.Humanoid.WalkSpeed = Value end,
})

CharacterTab:CreateSlider({
   Name = "Zıplama (JumpPower)",
   Range = {50, 500},
   Increment = 1,
   CurrentValue = 50,
   Callback = function(Value) lp.Character.Humanoid.JumpPower = Value end,
})

VehicleTab:CreateToggle({
   Name = "Araç Turbo Boost",
   CurrentValue = false,
   Callback = function(Value)
      _G.CarFast = Value
      spawn(function()
         while _G.CarFast do
            pcall(function()
                for _, v in pairs(workspace.Vehicles:GetChildren()) do
                    local seat = v:FindFirstChildWhichIsA("VehicleSeat", true)
                    if seat and seat.Occupant and seat.Occupant.Parent == lp.Character then
                        seat.MaxSpeed = 450
                        seat.Torque = 25000
                    end
                end
            end)
            task.wait(0.2)
         end
      end)
   end,
})

-- AYARLAR
WorldTab:CreateButton({
   Name = "Kapat (Destroy)",
   Callback = function() Rayfield:Destroy() end,
})
